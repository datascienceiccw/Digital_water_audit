{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h3 class="text-center text-3xl font-semibold text-blue-600 mb-8">Laundry Consumption</h3>
    
    <form method="POST" action="" >
        {% if details %}
        <div class="text-center my-2 p-3" style="position: relative;">
            <a href='{% url "delete_laundry_consumption" %}' class="btn btn-danger mb-4 mr-2" style="position: absolute; top: 0; right:0;">Reset</a>
        </div>
    {% endif %}
    {% csrf_token %}
    {% if details %}
        <fieldset disabled="disabled" class="max-w-6xl mx-auto bg-white p-8 rounded-lg shadow-xl border border-gray-200  form-container grid grid-cols-1 md:grid-cols-3 gap-4">
    {% else %}
        <fieldset class="max-w-6xl mx-auto bg-white p-8 rounded-lg shadow-xl border border-gray-200  form-container grid grid-cols-1 md:grid-cols-3 gap-4">
    {% endif %}
        <div class="mb-6">
            <label for="{{ form.laundry_source.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Water Source:
            </label>
            {{ form.laundry_source }}
            {% if form.laundry_source.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.laundry_source.errors.as_text }}</p>
            {% endif %}
        </div>
        <div class="mb-6">
            <label for="{{ form.input_vol.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Input Volume of Water:
            </label>
            {{ form.input_vol }}
            {% if form.input_vol.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.input_vol.errors.as_text }}</p>
            {% endif %}
        </div>
        <div class="mb-6">
            <label for="{{ form.reject_to.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Reject To:
            </label>
            {{ form.reject_to }}
            {% if form.reject_to.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.reject_to.errors.as_text }}</p>
            {% endif %}
        </div>

        <div class="mb-6">
            <label for="{{ form.reject_to_vol.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Volume of water rejected:
            </label>
            {{ form.reject_to_vol }}
            {% if form.reject_to_vol.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.reject_to_vol.errors.as_text }}</p>
            {% endif %}
        </div>
        <div class="mb-6">
            <label for="{{ form.washingmachine_capacity.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Washing Machine Capacity (kl):
            </label>
            {{ form.washingmachine_capacity }}
            {% if form.washingmachine_capacity.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.washingmachine_capacity.errors.as_text }}</p>
            {% endif %}
        </div>
        <div class="mb-6">
            <label for="{{ form.avg_num_solid_clothes.id_for_label }}" class="block text-sm font-medium text-gray-800 mb-2">
                Average Quantity of solid clothes per day (kg):
            </label>
            {{ form.avg_num_solid_clothes }}
            {% if form.avg_num_solid_clothes.errors %}
                <p class="text-red-600 text-xs italic mt-1">{{ form.avg_num_solid_clothes.errors.as_text }}</p>
            {% endif %}
        </div>
    </fieldset>
    <div class="text-center mt-5" style="position: relative;">
        <a href='{% url "waterbodies_consumption" %}' class="btn btn-primary px-5" style="position: absolute; bottom: 0; left: 0;">Previous</a>
    </div>
    {% if details %}
    <div class="text-center mt-5" style="position: relative;">
        <a href='{% url "boiler_consumption" %}' class="btn btn-primary px-5" style="position: absolute; bottom: 0; right: 0;">Next</a>
    </div>
    {% else %}
   <div class="text-center mt-5" style="position: relative;">
        <button type="submit" class="btn btn-primary px-5" style="position: absolute; bottom: 0; right: 0;">Next</button>
    </div>
    {% endif %}    
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sourceNameField = document.querySelector('#{{ form.laundry_source.id_for_label }}');
    const otherSourceContainer = document.querySelector('.other-source');

    sourceNameField.addEventListener('change', function() {
        otherSourceContainer.classList.toggle('hidden', sourceNameField.value !== '9');
    });

    const hotWaterField = document.querySelector('#{{ form.hot_water.id_for_label }}');
    const hotWaterContainer = document.querySelector('.hot-water-qty');

    hotWaterField.addEventListener('change', function() {
        hotWaterContainer.classList.toggle('hidden', hotWaterField.value !== '2');
    });

});
</script>

{% endblock %}
